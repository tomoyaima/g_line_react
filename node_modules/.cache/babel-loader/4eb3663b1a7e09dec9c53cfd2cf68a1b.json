{"ast":null,"code":"var _jsxFileName = \"/Users/imatomo/Desktop/gline-react/src/components/post.js\";\nimport React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { db } from '../firebase';\nimport firebase from '../firebase';\nimport { storageRef } from '../firebase';\n\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.save = e => {\n      storageRef.child('images').put(this.state.file).then(snap => {\n        this.setState({\n          uploading: false\n        }); // the loading percent logic here?\n        // how do i keep tabs on the percent?\n      }).catch(err => this.setState({\n        error: err.message\n      }));\n      e.preventDefault();\n      let id = 0;\n      let post_id = String(id);\n      const user = firebase.auth().currentUser;\n      const userdb = db.collection(\"users\").doc(user.uid);\n      userdb.get().then(userdb => {\n        if (userdb.exists) {\n          console.log(\"Document data:\", userdb.data());\n          db.collection(\"posts\").doc().set({\n            post_id: db.collection(\"posts\").doc(),\n            name: userdb.data().name,\n            pic: userdb.data().pic,\n            email: userdb.data().email,\n            course: userdb.data().course,\n            nickname: userdb.data().nickname,\n            body: this.state.body,\n            title: this.state.title,\n            favcount: 0,\n            librarycount: 0,\n            timestamp: new Date(),\n            answered: this.state.answered\n          }).then(() => {\n            this.setState({\n              post_id: db.collection(\"posts\").doc(),\n              name: userdb.data().name,\n              pic: userdb.data().pic,\n              email: userdb.data().email,\n              course: userdb.data().course,\n              nickname: userdb.data().nickname,\n              body: this.state.body,\n              title: this.state.title,\n              favcount: 0,\n              librarycount: 0,\n              timestamp: new Date(),\n              index: true\n            });\n            console.log(\"\\u8FFD\\u52A0\\u306B\\u6210\\u529F\\u3057\\u307E\\u3057\\u305F \");\n          }).catch(error => {\n            console.log(\"\\u8FFD\\u52A0\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F (\".concat(error, \")\"));\n          });\n        } else {\n          // doc.data() will be undefined in this case\n          console.log(\"No such document!\");\n        }\n      }).catch(function (error) {\n        console.log(\"\\u53D6\\u5F97\\u5931\\u6557 (\".concat(error, \")\"));\n      });\n    };\n\n    this.state = {\n      body: \"\",\n      title: \"\",\n      favcount: 0,\n      librarycount: 0,\n      answered: false,\n      timestamp: null,\n      file: ''\n    };\n    this.save = this.save.bind(this);\n    this.handleInputtitle = this.handleInputtitle.bind(this);\n    this.handleInputbody = this.handleInputbody.bind(this);\n    this.handleFileSelect = this.handleFileSelect.bind(this);\n  }\n\n  handleInputtitle(event) {\n    this.setState({\n      title: event.target.value\n    });\n  }\n\n  handleInputbody(event) {\n    this.setState({\n      body: event.target.value\n    });\n  } // coursecheck = () => {\n  //     var userdb = db.collection('users').doc('user.uid');\n  //     if (userdb.course == \"\") {\n  //         return true\n  //     } else {\n  //         return false\n  //     }\n  // }\n\n\n  handleFileSelect(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  render() {\n    console.log(this.props.user);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"App-intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    })), this.props.user ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"posttitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"\\u30BF\\u30A4\\u30C8\\u30EB\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.title,\n      onChange: this.handleInputtitle.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"postbody\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"\\u6295\\u7A3F\\u5185\\u5BB9\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.body,\n      onChange: this.handleInputbody.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"file-field input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"File\"), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleFileSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"file-path-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"file-path validate\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })), React.createElement(\"img\", {\n      src: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })), this.state.title == '' ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"\\u30BF\\u30A4\\u30C8\\u30EB\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\") : this.state.body != '' ? React.createElement(\"button\", {\n      onClick: this.save,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"\\u8CEA\\u554F\\u3092\\u6295\\u7A3F\\u3059\\u308B\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"\\u6295\\u7A3F\\u5185\\u5BB9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\")), React.createElement(\"li\", {\n      className: \"gline-logout\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    })), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"footer-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["/Users/imatomo/Desktop/gline-react/src/components/post.js"],"names":["React","BrowserRouter","Route","Link","db","firebase","storageRef","Post","Component","constructor","props","save","e","child","put","state","file","then","snap","setState","uploading","catch","err","error","message","preventDefault","id","post_id","String","user","auth","currentUser","userdb","collection","doc","uid","get","exists","console","log","data","set","name","pic","email","course","nickname","body","title","favcount","librarycount","timestamp","Date","answered","index","bind","handleInputtitle","handleInputbody","handleFileSelect","event","target","value","files","render","logout"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom'\nimport { db } from '../firebase'\nimport firebase from '../firebase'\nimport { storageRef } from '../firebase'\n\n\n\nclass Post extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            body : \"\",\n            title : \"\",\n            favcount: 0,\n            librarycount: 0,\n            answered:false,\n            timestamp:null,\n            file:'',\n            \n\n        }\n\n        this.save = this.save.bind(this);\n        this.handleInputtitle = this.handleInputtitle.bind(this);\n        this.handleInputbody = this.handleInputbody.bind(this);\n        this.handleFileSelect = this.handleFileSelect.bind(this)\n    }\n\n    handleInputtitle(event) {\n        this.setState({\n\n            title: event.target.value\n        })\n    }\n    handleInputbody(event) {\n        this.setState({\n            body: event.target.value\n\n        })\n    }\n\n    \n    // coursecheck = () => {\n    //     var userdb = db.collection('users').doc('user.uid');\n    //     if (userdb.course == \"\") {\n\n    //         return true\n    //     } else {\n    //         return false\n    //     }\n    // }\n    handleFileSelect(e) {\n        this.setState({file: e.target.files[0]})\n      }\n\n\n\n    save = (e) => {\n\n        \n        storageRef.child('images')\n          .put(this.state.file)\n          .then(snap => {\n            this.setState({uploading: false})\n            // the loading percent logic here?\n            // how do i keep tabs on the percent?\n          })\n          .catch(err => this.setState({error: err.message}))\n\n\n        e.preventDefault()\n        \n        let id =0;\n        let post_id = String(id)\n        const user = firebase.auth().currentUser\n        const userdb = db.collection(\"users\").doc(user.uid);\n        userdb.get().then((userdb) => {\n            if (userdb.exists) {\n                console.log(\"Document data:\", userdb.data());\n            \n                    db.collection(\"posts\").doc().set({\n                        post_id : db.collection(\"posts\").doc(),\n                        name: userdb.data().name,\n                        pic: userdb.data().pic,\n                        email: userdb.data().email,\n                        course: userdb.data().course,\n                        nickname: userdb.data().nickname,\n                        body: this.state.body,\n                        title: this.state.title,\n                        favcount: 0,\n                        librarycount: 0,\n                        timestamp: new Date(),\n                        answered:this.state.answered\n\n                    })\n                \n                        .then(() => {\n                            this.setState({\n                                post_id : db.collection(\"posts\").doc(),\n                                name: userdb.data().name,\n                                pic: userdb.data().pic,\n                                email: userdb.data().email,\n                                course: userdb.data().course,\n                                nickname: userdb.data().nickname,\n                                body: this.state.body,\n                                title: this.state.title,\n                                favcount: 0,\n                                librarycount: 0,\n                                timestamp: new Date(),\n                                index : true\n                            })\n                            console.log(`追加に成功しました `);\n                            \n                        })\n                        .catch((error) => {\n                            console.log(`追加に失敗しました (${error})`);\n                        });\n                    \n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n                    \n        })\n            .catch(function(error){\n            console.log(`取得失敗 (${error})`);\n             \n            });\n    }\n\n\n    render() {\n       console.log(this.props.user)\n        return (\n            \n         \n                <div>\n   \n                    <div className=\"main\">\n                        <div className=\"App\">\n                            <p className=\"App-intro\">\n\n                            </p>\n\n\n                        </div>\n                        \n                        {this.props.user ? (\n                            <div>\n                              \n                                <form>\n                                    <div className=\"posttitle\">タイトルを入力:\n                    <input type='text' value={this.state.title} onChange={this.handleInputtitle.bind(this)} />\n                                    </div>\n                                    <div className=\"postbody\">投稿内容を入力:\n                    <input type='text' value={this.state.body} onChange={this.handleInputbody.bind(this)} />\n                                    </div>\n                                    <div className=\"file-field input-field\">\n                                    <div className=\"btn\">\n                                        <span>File</span>\n                                        <input type=\"file\"onChange={this.handleFileSelect} />\n                                    </div>\n                                    <div className=\"file-path-wrapper\">\n                                        <input className=\"file-path validate\" type=\"text\"/>\n                                    </div>\n                                  <img src={this.state.file} />\n                                    </div>\n                                    \n\n                                    {this.state.title == ''?\n                                        (\n                                            <div>タイトルを入力してください</div>\n                                        ) : (\n                                             this.state.body != ''?\n                                                (\n                                                    <button onClick={this.save}><Link to='/index'>質問を投稿する</Link></button>\n\n                                                ) : (\n                                                    <div>投稿内容を入力してください</div>\n\n                                                )\n                                        )\n                                    }\n\n\n                                </form>\n                                <li className=\"gline-logout\" onClick={this.logout}><Link to='/'>ログアウト</Link></li>\n                            </div>\n                        ) : (\n                                <div></div>\n                            )\n                           \n                        }\n                        \n                    </div>\n\n                    <footer>\n                        <div className=\"footer-content\">\n\n                        </div>\n                    </footer>\n                </div>\n           \n           \n        );\n    }\n}\n\n\n\nexport default Post"]},"metadata":{},"sourceType":"module"}