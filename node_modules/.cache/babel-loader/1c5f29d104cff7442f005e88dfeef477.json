{"ast":null,"code":"var _jsxFileName = \"/Users/imatomo/Desktop/gline-react/src/components/login.js\";\nimport React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { db } from '../firebase';\nimport firebase from '../firebase';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.login = () => {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider);\n      this.setState({\n        isLogging: true\n      });\n      const user = firebase.auth().currentUser;\n      const userdb = db.collection(\"users\").doc(user.uid);\n\n      if (userdb.course == '') {\n        this.props.history.push('/index');\n      } else {\n        this.props.history.push('/login');\n      }\n    };\n\n    this.logout = () => {\n      firebase.auth().signOut();\n      this.setState({\n        isLogging: false\n      });\n    };\n\n    this.save = e => {\n      e.preventDefault();\n      const user = firebase.auth().currentUser;\n\n      if (user) {\n        db.collection(\"users\").doc(user.uid).set({\n          name: user.displayName,\n          pic: user.photoURL || '/images/profile_placeholder.png',\n          email: user.email,\n          course: this.state.course,\n          nickname: this.state.nickname\n        }).then(() => {\n          console.log(\"\\u8FFD\\u52A0\\u306B\\u6210\\u529F\\u3057\\u307E\\u3057\\u305F \");\n        }).catch(error => {\n          console.log(\"\\u8FFD\\u52A0\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F (\".concat(error, \")\"));\n        });\n      }\n    };\n\n    this.state = {\n      course: '',\n      nickname: ''\n    };\n    this.send = this.save.bind(this);\n  }\n\n  handleInputcourse(event) {\n    this.setState({\n      course: event.target.value\n    });\n  }\n\n  handleInputnickname(event) {\n    this.setState({\n      nickname: event.target.value\n    });\n  } // coursecheck = () => {\n  //     var userdb = db.collection('users').doc('user.uid');\n  //     if (userdb.course == \"\") {\n  //         return true\n  //     } else {\n  //         return false\n  //     }\n  // }\n\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        user\n      });\n    });\n  }\n\n  render() {\n    console.log(this.props.user);\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"App-intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), this.props.user ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"plfname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\u540D\\u524D: \", this.props.user && this.props.user.displayName), React.createElement(\"div\", {\n      className: \"plfemail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"E-mail: \", this.props.user && this.props.user.email), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"plfnickname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"\\u30CB\\u30C3\\u30AF\\u30CD\\u30FC\\u30E0\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.nickname,\n      onChange: this.handleInputnickname.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"plfcourse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"\\u30B3\\u30FC\\u30B9\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.course,\n      onChange: this.handleInputcourse.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), this.state.nickname == '' ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"\\u540D\\u524D\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\") : this.state.course == 'game' || this.state.course == 'web' || this.state.course == 'iphone' ? React.createElement(\"button\", {\n      onClick: this.save,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"geek-line\\u306B\\u767B\\u9332\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\u30B3\\u30FC\\u30B9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044(WEB\\u30B3\\u30FC\\u30B9=\\\"web\\\",GAME\\u30B3\\u30FC\\u30B9=\\\"game\\\",iPhone\\u30B3\\u30FC\\u30B9=\\\"iphone\\\")\")), React.createElement(\"li\", {\n      className: \"gline-logout\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    })), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"footer-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/imatomo/Desktop/gline-react/src/components/login.js"],"names":["React","BrowserRouter","Route","Link","db","firebase","Login","Component","constructor","props","login","provider","auth","GoogleAuthProvider","signInWithPopup","setState","isLogging","user","currentUser","userdb","collection","doc","uid","course","history","push","logout","signOut","save","e","preventDefault","set","name","displayName","pic","photoURL","email","state","nickname","then","console","log","catch","error","send","bind","handleInputcourse","event","target","value","handleInputnickname","componentDidMount","onAuthStateChanged","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom'\nimport { db } from '../firebase'\nimport firebase from '../firebase'\n\n\n\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n\n            course: '',\n            nickname: ''\n        }\n\n        this.send = this.save.bind(this);\n    }\n\n    handleInputcourse(event) {\n        this.setState({\n\n            course: event.target.value\n        })\n    }\n    handleInputnickname(event) {\n        this.setState({\n            nickname: event.target.value\n\n        })\n    }\n    // coursecheck = () => {\n    //     var userdb = db.collection('users').doc('user.uid');\n    //     if (userdb.course == \"\") {\n\n    //         return true\n    //     } else {\n    //         return false\n    //     }\n    // }\n\n\n    componentDidMount() {\n        firebase.auth().onAuthStateChanged(user => {\n          this.setState({ user })\n        })\n      }\n    \n      login=()=> {\n        const provider = new firebase.auth.GoogleAuthProvider()\n        firebase.auth().signInWithPopup(provider)\n        this.setState({ isLogging:true }) \n        const user = firebase.auth().currentUser\n        const userdb =  db.collection(\"users\").doc(user.uid)\n            if(userdb.course == ''){\n          this.props.history.push('/index')\n        }else{\n          this.props.history.push('/login')\n        }\n        \n      }\n    \n      logout=()=> {\n        firebase.auth().signOut()\n        this.setState({ isLogging:false }) \n      }\n\n\n    save = (e) => {\n        e.preventDefault()\n\n        const user = firebase.auth().currentUser\n        if (user) {\n            db.collection(\"users\").doc(user.uid).set({\n                name: user.displayName,\n                pic: user.photoURL || '/images/profile_placeholder.png',\n                email: user.email,\n                course: this.state.course,\n                nickname: this.state.nickname\n            })\n                .then(() => {\n                    \n                    console.log(`追加に成功しました `);\n                })\n                .catch((error) => {\n                    console.log(`追加に失敗しました (${error})`);\n                });\n        }\n        \n    }\n\n\n    render() {\n        console.log(this.props.user)\n        return (\n            \n            <BrowserRouter>\n                <div>\n                    <header>\n\n                      \n                    </header>\n                    <div className=\"main\">\n                        <div className=\"App\">\n                            <p className=\"App-intro\">\n\n                            </p>\n\n\n                        </div>\n       \n                        {this.props.user ? (\n                            <div>\n                                <div className=\"plfname\">名前: {this.props.user && this.props.user.displayName}</div>\n                                <div className=\"plfemail\">E-mail: {this.props.user && this.props.user.email}</div>\n                               <form>\n                                    <div className=\"plfnickname\">ニックネームを入力:\n                    <input type='text' value={this.state.nickname} onChange={this.handleInputnickname.bind(this)} />\n                                    </div>\n                                    <div className=\"plfcourse\">コースを入力:\n                    <input type='text' value={this.state.course} onChange={this.handleInputcourse.bind(this)} />\n                                    </div>\n                                    \n\n                                    {this.state.nickname == '' ?\n                                        (\n                                            <div>名前を入力してください</div>\n                                        ) : (\n                                            this.state.course == 'game' || this.state.course == 'web' || this.state.course == 'iphone' ?\n                                                (\n                                                    <button onClick={this.save}><Link to='/index'>geek-lineに登録</Link></button>\n\n                                                ) : (\n                                                    <div>コースを入力してください(WEBコース=\"web\",GAMEコース=\"game\",iPhoneコース=\"iphone\")</div>\n\n                                                )\n                                        )\n                        \n                                    }\n\n\n                                </form>\n\n                                <li className=\"gline-logout\" onClick={this.logout}><Link to='/'>ログアウト</Link></li>\n                            </div>\n                        ) : (\n                                <div></div>\n                            )\n        \n          \n                        }\n                    </div>\n\n                    <footer>\n                        <div className=\"footer-content\">\n\n                        </div>\n                    </footer>\n                </div>\n            </BrowserRouter>\n           \n        );\n    }\n}\n\n\n\nexport default Login"]},"metadata":{},"sourceType":"module"}