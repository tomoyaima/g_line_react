{"ast":null,"code":"var _jsxFileName = \"/Users/imatomo/Desktop/gline-react/src/components/post.js\";\nimport React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { db } from '../firebase';\nimport firebase from '../firebase';\n\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.save = e => {\n      e.preventDefault();\n      let id;\n      let post_id = String(id + 1);\n      const body = this.state.body;\n      const user = firebase.auth().currentUser;\n      const userdb = db.collection(\"users\").doc(user.uid);\n      userdb.get().then(function (doc) {\n        if (doc.exists) {\n          console.log(\"Document data:\", doc.data());\n        } else {\n          // doc.data() will be undefined in this case\n          console.log(\"No such document!\");\n        }\n\n        if (user) {\n          db.collection(\"posts\").doc(post_id).set({\n            post_id: post_id,\n            name: userdb.name,\n            pic: userdb.photoURL || '/images/profile_placeholder.png',\n            email: userdb.email,\n            course: userdb.course,\n            nickname: userdb.nickname,\n            body: this.state.body,\n            title: this.state.title\n          }).then(() => {\n            console.log(\"\\u8FFD\\u52A0\\u306B\\u6210\\u529F\\u3057\\u307E\\u3057\\u305F \");\n          }).catch(error => {\n            console.log(\"\\u8FFD\\u52A0\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F (\".concat(error, \")\"));\n          });\n        }\n      }).catch(error => {\n        console.log(\"\\u53D6\\u5F97\\u5931\\u6557 (\".concat(error, \")\"));\n      });\n    };\n\n    this.state = {\n      body: \"\",\n      title: \"\"\n    };\n    this.send = this.save.bind(this);\n  }\n\n  handleInputtitle(event) {\n    this.setState({\n      title: event.target.value\n    });\n  }\n\n  handleInputbody(event) {\n    this.setState({\n      body: event.target.value\n    });\n  } // coursecheck = () => {\n  //     var userdb = db.collection('users').doc('user.uid');\n  //     if (userdb.course == \"\") {\n  //         return true\n  //     } else {\n  //         return false\n  //     }\n  // }\n\n\n  render() {\n    console.log(this.props.user);\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.props.user ? React.createElement(\"div\", {\n      className: \"header-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"header-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      className: \"header-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"App-intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), this.props.user ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"posttitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u30BF\\u30A4\\u30C8\\u30EB\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.title,\n      onChange: this.handleInputtitle.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"postbody\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\u6295\\u7A3F\\u5185\\u5BB9\\u3092\\u5165\\u529B:\", React.createElement(\"input\", {\n      type: \"textarea\",\n      value: this.state.body,\n      onChange: this.handleInputbody.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), this.state.title == '' ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u30BF\\u30A4\\u30C8\\u30EB\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\") : this.state.body != '' ? React.createElement(\"button\", {\n      onClick: this.save,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"\\u8CEA\\u554F\\u3092\\u6295\\u7A3F\\u3059\\u308B\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"\\u6295\\u7A3F\\u5185\\u5BB9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\")), React.createElement(\"li\", {\n      className: \"gline-logout\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"footer-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["/Users/imatomo/Desktop/gline-react/src/components/post.js"],"names":["React","BrowserRouter","Route","Link","db","firebase","Post","Component","constructor","props","save","e","preventDefault","id","post_id","String","body","state","user","auth","currentUser","userdb","collection","doc","uid","get","then","exists","console","log","data","set","name","pic","photoURL","email","course","nickname","title","catch","error","send","bind","handleInputtitle","event","setState","target","value","handleInputbody","render","logout"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport { BrowserRouter, Route, Link } from 'react-router-dom'\nimport { db } from '../firebase'\nimport firebase from '../firebase'\n\n\n\n\nclass Post extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            body : \"\",\n            title : \"\"\n        }\n\n        this.send = this.save.bind(this);\n    }\n\n    handleInputtitle(event) {\n        this.setState({\n\n            title: event.target.value\n        })\n    }\n    handleInputbody(event) {\n        this.setState({\n            body: event.target.value\n\n        })\n    }\n    // coursecheck = () => {\n    //     var userdb = db.collection('users').doc('user.uid');\n    //     if (userdb.course == \"\") {\n\n    //         return true\n    //     } else {\n    //         return false\n    //     }\n    // }\n\n\n\n\n    save = (e) => {\n        e.preventDefault()\n        let id;\n        let post_id = String(id+1)\n        const body = this.state.body\n        const user = firebase.auth().currentUser\n        const userdb = db.collection(\"users\").doc(user.uid);\n        userdb.get().then(function(doc){\n            if (doc.exists) {\n                console.log(\"Document data:\", doc.data());\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n        \n        if (user) {\n            db.collection(\"posts\").doc(post_id).set({\n                post_id : post_id,\n                name: userdb.name,\n                pic: userdb.photoURL || '/images/profile_placeholder.png',\n                email: userdb.email,\n                course: userdb.course,\n                nickname: userdb.nickname,\n                body:this.state.body,\n                title:this.state.title\n\n            })\n          \n                .then(() => {\n                    console.log(`追加に成功しました `);\n                })\n                .catch((error) => {\n                    console.log(`追加に失敗しました (${error})`);\n                });\n              }\n            \n        })\n              .catch((error) => {\n                console.log(`取得失敗 (${error})`);\n              });\n    }\n\n\n    render() {\n        console.log(this.props.user)\n        return (\n            \n            <BrowserRouter>\n                <div>\n                    <header>\n\n                        {this.props.user ?\n                            (\n                                <div className=\"header-content\">\n                                    <ul className=\"header-list\">\n\n                                    </ul>\n\n                                </div>\n                            )\n                            :\n                            (\n                                <div className=\"header-content\">\n\n\n                                </div>\n\n\n\n\n                            )}\n                    </header>\n                    <div className=\"main\">\n                        <div className=\"App\">\n                            <p className=\"App-intro\">\n\n                            </p>\n\n\n                        </div>\n\n                        {this.props.user ? (\n                            <div>\n                              \n                                <form>\n                                    <div className=\"posttitle\">タイトルを入力:\n                    <input type='text' value={this.state.title} onChange={this.handleInputtitle.bind(this)} />\n                                    </div>\n                                    <div className=\"postbody\">投稿内容を入力:\n                    <input type='textarea' value={this.state.body} onChange={this.handleInputbody.bind(this)} />\n                                    </div>\n\n\n                                    {this.state.title == ''?\n                                        (\n                                            <div>タイトルを入力してください</div>\n                                        ) : (\n                                             this.state.body != ''?\n                                                (\n                                                    <button onClick={this.save}><Link to='/index'>質問を投稿する</Link></button>\n\n                                                ) : (\n                                                    <div>投稿内容を入力してください</div>\n\n                                                )\n                                        )\n                                    }\n\n\n                                </form>\n                                <li className=\"gline-logout\" onClick={this.logout}><Link to='/'>ログアウト</Link></li>\n                            </div>\n                        ) : (\n                                <div></div>\n                            )}\n                    </div>\n\n                    <footer>\n                        <div className=\"footer-content\">\n\n                        </div>\n                    </footer>\n                </div>\n            </BrowserRouter>\n           \n        );\n    }\n}\n\n\n\nexport default Post"]},"metadata":{},"sourceType":"module"}