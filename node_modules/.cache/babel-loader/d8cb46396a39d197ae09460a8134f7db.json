{"ast":null,"code":"import _objectSpread from \"/Users/imatomo/Desktop/gline-react/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/imatomo/Desktop/gline-react/src/components/Detail.js\";\nimport React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport \"./style.css\";\nimport Post from \"./Post\";\nimport { db } from '../firebase';\nimport firebase from '../firebase';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { storage } from '../firebase';\nimport Posts from \"./Posts\";\n\nclass Detail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      post: []\n    };\n  }\n\n  componentWillMount() {\n    const postsref = db.collection(\"posts\").orderBy('timestamp', 'desc');\n    postsref.limit(20).onSnapshot(snapshot => {\n      const posts = snapshot.docs.map(postdoc => {\n        const post = postdoc.data(); //  console.log(post);\n\n        if (post.postimageurl != []) {\n          const pathref = storage.ref().child(\"images/\".concat(post.postimageurl));\n          pathref.getDownloadURL().then(url => {\n            this.setState(state => {\n              const index = state.posts.findIndex(post => {\n                return post.id === postdoc.id;\n              });\n              state.posts[index].postimageurl.push(url);\n              return state;\n            });\n          });\n        }\n\n        return _objectSpread({}, post, {\n          id: postdoc.id\n        });\n      });\n      console.log(posts);\n      const uid = this.props.match.params.id;\n      const post = posts.find(posts => {\n        return posts.id === uid;\n      });\n      this.setState({\n        post: post\n      });\n    });\n  }\n\n  componentDidMount() {\n    const uid = this.props.match.params.id;\n    const post = this.props.posts.find(posts => {\n      return posts.id === uid;\n    });\n    this.setState({\n      post: post\n    });\n    console.log(this.props);\n    console.log(post);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.props.user && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.state.post.title, this.state.post.body, this.state.post.name, this.state.post.pictureurl, this.state.post.course, this.state.post.nickname, this.state.post.favcount, this.state.post.librarycount));\n  }\n\n}\n\nexport default Detail;","map":{"version":3,"sources":["/Users/imatomo/Desktop/gline-react/src/components/Detail.js"],"names":["React","Post","db","firebase","BrowserRouter","Route","Link","storage","Posts","Detail","Component","constructor","props","state","post","componentWillMount","postsref","collection","orderBy","limit","onSnapshot","snapshot","posts","docs","map","postdoc","data","postimageurl","pathref","ref","child","getDownloadURL","then","url","setState","index","findIndex","id","push","console","log","uid","match","params","find","componentDidMount","render","user","title","body","name","pictureurl","course","nickname","favcount","librarycount"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../bower_components/materialize/dist/css/materialize.css\";\nimport \"./style.css\";\nimport Post from \"./Post\"\nimport { db } from '../firebase'\nimport firebase from '../firebase'\nimport { BrowserRouter, Route, Link } from 'react-router-dom'\nimport { storage } from '../firebase'\nimport Posts from \"./Posts\";\n\nclass Detail extends React.Component{\n    constructor(props){\n        super(props)\n        this.state={\n           post:[]\n\n        }\n    }\n\n    componentWillMount(){\n\n        \n\n        const postsref = db.collection(\"posts\").orderBy('timestamp', 'desc')\n        postsref.limit(20).onSnapshot((snapshot) => {\n            const posts = snapshot.docs.map( (postdoc) =>{\n                \n                const post = postdoc.data();\n                    //  console.log(post);\n                if(post.postimageurl!=[]){\n                    const pathref = storage.ref().child(`images/${post.postimageurl}`)\n                    pathref.getDownloadURL().then((url)=>{ \n\n                        this.setState((state)=>{\n                            const index =  state.posts.findIndex((post)=>{\n                                return post.id === postdoc.id;\n                            })\n                            state.posts[index].postimageurl.push(url)\n\n\n                            \n                            return state\n                        })\n                    })\n\n                    \n                }\n                return {...post,id:postdoc.id}\n                \n               \n            })\n            console.log(posts)\n            const uid =this.props.match.params.id\n            const post= posts.find((posts) => {return (posts.id === uid);})\n            this.setState({\n                post:post\n            })\n           \n        });\n       \n    \n    }\n    componentDidMount(){\n   \n        const uid =this.props.match.params.id\n        const post= this.props.posts.find((posts) => {return (posts.id === uid);})\n        this.setState({\n            post:post\n        })\n       \n        \n\n        \n        console.log(this.props)\n        console.log(post)\n\n   \n\n    }\n\n    render(){\n\n        \n        return(\n            <div>\n\n                {this.props.user&&\n                     \n                    \n                          <div>\n                                {this.state.post.title}\n                                {this.state.post.body}\n                                {this.state.post.name}\n                                {this.state.post.pictureurl}\n                               \n                                {this.state.post.course}\n                                {this.state.post.nickname}\n                                {this.state.post.favcount}\n                                {this.state.post.librarycount}\n                                \n                            </div>\n                        \n\n                   \n                }\n            \n                \n            </div>\n        );\n    }\n    \n}\n\nexport default Detail\n"]},"metadata":{},"sourceType":"module"}